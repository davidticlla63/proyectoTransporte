<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	template="/WEB-INF/templates/template_index.xhtml">

	<ui:define name="head">
		<title>Creación Empresa</title>
	</ui:define>

	<ui:define name="content">
		<!--BEGIN CONTENT-->
		<div class="content">

			<section class="main-content"
				style="padding-left: 0px; padding-right: 0px;">
				<h:form id="form0">
					<section class="content-header">
						<div class="pull-left" style="padding-top: 2px;">
							<div class="btn-group-demo" style="padding-left: 10px;">
								<div class="btn-group">
									<p:commandLink id="buttonCancelar1" value="&#160; Cancelar"
										styleClass="btn btn-warning ion-minus-circled"
										style="height:31px; padding:center"
										rendered="#{creacionController.buttonCancelar}"
										onclick="location.href='#{request.contextPath}/pages/index.xhtml'">
									</p:commandLink>
									<p:commandLink id="buttonCancelar2" value="&#160; Cancelar"
										styleClass="btn btn-warning ion-minus-circled"
										style="height:31px; padding:center"
										rendered="#{! creacionController.buttonCancelar}"
										onclick="location.href='#{request.contextPath}/logoutServlet'">
									</p:commandLink>

									<p:commandLink id="buttonRegistrar" value="&#160; Registrar"
										styleClass="btn btn-success ion-checkmark"
										style="height:31px; padding:center"
										update="@form,formGrowl:msgs1"
										action="#{creacionController.registrarEmpresa2()}">
									</p:commandLink>
								</div>
							</div>
						</div>

						<div class="pull-right">
							<ol class="breadcrumb">
								<li><a href="#" style="color: #0090FF; font-size: 12px;">Inicio</a></li>
								<li><a href="#" style="color: #0090FF; font-size: 12px;">Creación
										Empresa</a></li>
							</ol>
						</div>
					</section>

					<section class="main-content" style="background-color: #f9fafa;">
						<div class="row">
							<div class="col-md-12">
								<div class="panel">
									<div class="panel-body form">
										<div id="wizard-option1" class="form-horizontal">
											<div class="form-body">
												<ul class="bwizard-steps nav nav-pills mbxl">
													<li class="#{creacionController.tabEmpresa}"><a
														href="#tab1" data-toggle="tab"><span
															class="step-number">1</span><span class="step-desc">EMPRESA<br />
																<small>Información Empresa</small>
														</span></a></li>
													<li class="#{creacionController.tabGestion}"><a
														href="#tab2" data-toggle="tab"><span
															class="step-number">2</span><span class="step-desc">GESTION<br />
																<small>Información Gestión</small>
														</span></a></li>
													<li class="#{creacionController.tabPlanCuenta}"><a
														
														href="#tab3" data-toggle="tab"><span
															class="step-number">3</span><span class="step-desc">CUENTA<br />
																<small>Estructura Plan Cuenta</small>
														</span></a></li>
													<li class="#{creacionController.tabParametros}"><a
														href="#tab4" data-toggle="tab"><span
															class="step-number">4</span><span class="step-desc">PARAMETRO<br />
																<small>Paametros generales</small>
														</span></a></li>
												</ul>
												<div class="tab-content mbn pan">
													<div id="tab1"
														class="tab-pane #{creacionController.tabEmpresa}">
														<h4 class="mbl">Información de la Empresa</h4>
														<div class="form-group">
															<label class="control-label col-md-3"> <p:outputLabel
																	id="labelRazonSocial" value="Razon Social"
																	for="inputTextRazonSocial" />
															</label>
															<div class="col-md-3">
																<h:inputText id="inputTextRazonSocial" onfocus="true"
																	value="#{creacionController.newEmpresa.razonSocial}"
																	required="true" autocomplete="off"
																	requiredMessage="Razon Social es requerido"
																	style=" color: #555555; background-image: none; text-transform: uppercase;"
																	styleClass="input-sm form-control">
																	<f:ajax />
																</h:inputText>
															</div>
														</div>
														<div class="form-group">
															<label class="control-label col-md-3"><p:outputLabel
																	id="labelNit" value="Nit" for="inputTextNit" /></label>
															<div class="col-md-3">
																<h:inputText id="inputTextNit" required="true"
																	requiredMessage="Nit es requerido" autocomplete="off"
																	value="#{creacionController.newEmpresa.nit}"
																	style=" color: #555555; background-image: none;"
																	styleClass="input-sm form-control">
																	<f:ajax />
																</h:inputText>
															</div>
														</div>
														<div class="form-group">
															<label class="control-label col-md-3"><p:outputLabel
																	id="labelDireccion" value="Dirección"
																	for="inputTextDireccion" /></label>
															<div class="col-md-3">
																<h:inputText id="inputTextDireccion" required="true"
																	requiredMessage="Direccion es requerido"
																	autocomplete="off"
																	value="#{creacionController.newEmpresa.direccion}"
																	style=" color: #555555; background-image: none;"
																	styleClass="input-sm form-control">
																	<f:ajax />
																</h:inputText>
															</div>
														</div>
														<div class="form-group">
															<label class="control-label col-md-3"><p:outputLabel
																	id="labelCiudad" value="Ciudad" for="inputTextCiudad" /></label>
															<div class="col-md-3">
																<h:inputText id="inputTextCiudad" required="true"
																	requiredMessage="Ciudad es requerido"
																	autocomplete="off"
																	value="#{creacionController.newEmpresa.ciudad}"
																	style=" color: #555555; background-image: none;"
																	styleClass="input-sm form-control">
																	<f:ajax />
																</h:inputText>
															</div>
														</div>
														<div class="form-group last">
															<label class="control-label col-md-3"><p:outputLabel
																	id="labelTelefono" value="Teléfono"
																	for="inputTextTelefono" /></label>
															<div class="col-md-3">
																<h:inputText id="inputTextTelefono" required="true"
																	requiredMessage="Telefono es requerido"
																	autocomplete="off"
																	value="#{creacionController.newEmpresa.telefono}"
																	style=" color: #555555; background-image: none;"
																	styleClass="input-sm form-control">
																	<f:ajax />
																</h:inputText>
															</div>
														</div>
													</div>
													<div id="tab2"
														class="tab-pane #{creacionController.tabGestion}">
														<h4 class="mbl">Datos de la Gestión Contable</h4>
														<div class="form-group">
															<label class="control-label col-md-3"><p:outputLabel
																	id="labelGestion" value="Gestión"
																	for="inputTextGestion" /></label>
															<div class="col-md-2">
																<h:inputText id="inputTextGestion" onfocus="true"
																	required="true" requiredMessage="Gestion es requerido"
																	value="#{creacionController.newGestion.gestion}"
																	style=" color: #555555; background-image: none;"
																	onkeypress="return validateOnlyNumber(event)"
																	styleClass="input-sm form-control">
																	<f:ajax />
																</h:inputText>
															</div>
															<div class="col-md-2 no-padding"
																style="padding-left: 5px; padding-right: 5px;">
																<h:selectOneMenu id="periodo2"
																	styleClass="input-sm form-control"
																	style=" color: #555555; height:25px; font-size:11px;"
																	immediate="true" value="#{creacionController.periodo}">
																	<f:ajax />
																	<f:selectItems
																		value="#{creacionController.arrayPeriodo}" />
																</h:selectOneMenu>
															</div>
														</div>
														<div class="form-group">
															<label class="control-label col-md-3"><p:outputLabel
																	id="labelPeriodoActual" value="Periodo Actual"
																	for="inputTextPeriodoActual" /></label>
															<div class="col-md-2">
																<h:selectOneMenu id="inputTextPeriodoActual"
																	styleClass="input-sm form-control" required="true"
																	requiredMessage="Periodo Actual es requerido"
																	style=" color: #555555; height:25px; font-size:11px;"
																	immediate="true"
																	value="#{creacionController.periodoActual}">
																	<f:ajax />
																	<f:selectItems
																		value="#{creacionController.arrayPeriodoActual}" />
																</h:selectOneMenu>
															</div>
														</div>
														<div class="form-group">
															<label class="control-label col-md-3"><p:outputLabel
																	id="labelTipoCambio" value="Tipo Cambio Inicial"
																	for="inputTextTipoCambio" /> </label>
															<div class="col-md-2">
																<h:inputText id="inputTextTipoCambio"
																	value="#{creacionController.tipoCambio}"
																	required="true"
																	requiredMessage="Tipo cambio es requerido"
																	style=" color: #555555; background-image: none;"
																	onkeypress="return validateOnlyNumber(event)"
																	styleClass="input-sm form-control">
																	<f:ajax />
																</h:inputText>
															</div>
														</div>
														<div class="form-group">
															<label class="control-label col-md-3"><p:outputLabel
																	id="labelUFVInicial" value="UFV inicial"
																	for="inputTextUFVInicial" /> </label>
															<div class="col-md-2">
																<h:inputText id="inputTextUFVInicial" required="true"
																	requiredMessage="Ufv es requerido"
																	value="#{creacionController.tipoCambioUfv}"
																	style=" color: #555555; background-image: none;"
																	onkeypress="return validateOnlyNumber(event)"
																	styleClass="input-sm form-control">
																	<f:ajax />
																</h:inputText>
															</div>
														</div>
													</div>
													<div id="tab3"
														class="tab-pane #{creacionController.tabPlanCuenta}">
														<h4 class="mbl">Información de Plan de Cuentas</h4>

														<div class="form-group">
															<label class="control-label col-md-3">Número
																Niveles <span class="required">*</span>
															</label>
															<div class="col-md-2">
																<p:spinner id="basic"
																	value="#{creacionController.nivel}" min="2" max="9">
																	<p:ajax update="@form"
																		listener="#{creacionController.aumentarOSubir()}" />
																</p:spinner>
															</div>
														</div>
														<ui:fragment id="fragment1"
															rendered="#{ creacionController.nivel == 5}">
															<div class="form-group">
																<label class="control-label col-md-3">Tipo Plan
																	de Cuenta<span class="required">*</span>
																</label>
																<div class="col-md-6">
																	<p:selectOneRadio id="console"
																		value="#{creacionController.tipoPlanCuenta}">
																		<p:ajax update="@form" />
																		<f:selectItem
																			itemLabel="Plan de Cuenta Defecto	&#160; &#160; &#160;"
																			itemValue="default" />
																		<f:selectItem itemLabel="Plan de Cuenta Personalizado"
																			itemValue="personalizado" />
																	</p:selectOneRadio>
																</div>
															</div>
														</ui:fragment>
														<div class="form-group">
															<label class="control-label col-md-3">Codificación<span
																class="required">*</span>
															</label>
															<div class="col-md-2">
																<p:outputLabel id="labelCodigo"
																	value="#{creacionController.codigo}" />
															</div>
															<div class="col-md-2">
																<p:commandLink id="buttonVerPlanCuenta"
																	value="&#160; Ver Plan Cuenta"
																	styleClass="btn btn-primary ion-ios7-copy-outline"
																	rendered="#{creacionController.tipoPlanCuenta.equals('default') and creacionController.nivel==5 }"
																	oncomplete="PF('dlgPlanCuenta').show();"
																	style="height:31px; padding:center">
																</p:commandLink>
															</div>
														</div>
														<ui:fragment id="fragment2"
															rendered="#{creacionController.tipoPlanCuenta.equals('personalizado')}">
															<div class="form-group">
																<label class="control-label col-md-3">Detalle<span
																	class="required">*</span>
																</label>
																<div class="col-md-4">
																	<p:dataTable id="dataTableNivel" var="var"
																		value="#{creacionController.listNivel}"
																		selection="#{creacionController.selectedNivel}"
																		reflow="true" selectionMode="single"
																		rowKey="#{var.id}"
																		style="font-size: 12px !important; line-height: 1.33846154 !important; font-family: sans-serif !important;">
																		<f:facet name="header">
           																	Niveles
       																	</f:facet>
																		<p:ajax event="rowSelect"
																			listener="#{creacionController.onRowSelectNivel}"
																			update="@form" />
																		<p:column width="10%" headerText="Numero">
																			<h:outputText value="#{var.id}" />
																		</p:column>
																		<p:column width="10%" headerText="Nivel">
																			<h:outputText value="#{var.nombre}" />
																		</p:column>
																		<p:column width="10%" headerText="Tamaño">
																			<h:outputText value="#{var.tamanio}" />
																		</p:column>
																	</p:dataTable>
																</div>
															</div>
															<ui:fragment id="fragment3"
																rendered="#{ ! creacionController.selectedNivel.id.equals('0')}">
																<div class="form-group">
																	<label class="control-label col-md-3">Tamaño
																		Codigo por Nivel :<span class="required">*</span>
																	</label>
																	<div class="col-md-2">
																		<p:spinner id="spinnerTamanioNivel"
																			value="#{creacionController.tamanio}" min="1" max="8">
																			<p:ajax update="@form"
																				listener="#{creacionController.cargarTamanio()}" />
																		</p:spinner>
																	</div>
																</div>
															</ui:fragment>
														</ui:fragment>
														<div class="form-group">
															<label class="control-label col-md-3">Definicion
																de Plan de Cuenta<span class="required">*</span>
															</label>
															<div class="col-md-2">
																<p:commandLink id="buttonDefinirPlanCuenta"
																	value="&#160; Definir"
																	styleClass="btn btn-primary ion-wand"
																	oncomplete="PF('dlgDefinirPlanCuenta').show();"
																	style="height:31px; padding:center">
																</p:commandLink>
															</div>
															<div class="col-md-2"></div>
														</div>

													</div>
													<div id="tab4"
														class="tab-pane #{creacionController.tabParametros}">
														<h4 class="mbl">Parámetros</h4>

														<div class="form-group">
															<label class="control-label col-md-4">Nacional</label>
															<div class="col-md-2">
																<h:selectOneMenu id="monedaNacional"
																	styleClass="input-sm form-control"
																	style=" color: #555555; height:25px; font-size:11px;"
																	immediate="true"
																	value="#{creacionController.nombreMonedaNacional}">
																	<p:ajax event="change" />
																	<f:selectItems
																		value="#{creacionController.listaMoneda}" />
																</h:selectOneMenu>
															</div>
															<div class="col-md-1">Simbolo</div>
															<div class="col-md-2">
																<h:inputText
																	value="#{creacionController.simboloMonedaNacional}"
																	style=" color: #555555; background-image: none;"
																	styleClass="input-sm form-control">
																	<f:ajax />
																</h:inputText>
															</div>
														</div>
														<div class="form-group">
															<label class="control-label col-md-4">Extranjera</label>
															<div class="col-md-2">
																<h:selectOneMenu id="monedaExtranjera"
																	styleClass="input-sm form-control"
																	style=" color: #555555; height:25px; font-size:11px;"
																	immediate="true"
																	value="#{creacionController.nombreMonedaExtranjera}">
																	<p:ajax event="change" />
																	<f:selectItems
																		value="#{creacionController.listaMoneda}" />
																</h:selectOneMenu>
															</div>
															<div class="col-md-1">Simbolo</div>
															<div class="col-md-2">
																<h:inputText
																	value="#{creacionController.simboloMonedaExtranjera}"
																	style=" color: #555555; background-image: none;"
																	styleClass="input-sm form-control">
																	<f:ajax />
																</h:inputText>
															</div>
														</div>
														<div class="form-group">
															<label class="control-label col-md-4">Centro
																Costo</label>
															<div class="col-md-2">
																<label class="switch switch-success switch-sm">
																	<h:selectBooleanCheckbox
																		value="#{creacionController.parametroEmpresa.centroCosto}"
																		styleClass="switch">
																		<f:ajax />
																	</h:selectBooleanCheckbox><span class="switch"></span>
																</label>
															</div>
														</div>
														<div class="form-group">
															<label class="control-label col-md-4">Facturación:
																Computarizada</label>
															<div class="col-md-2">
																<label class="switch switch-success switch-sm">
																	<h:selectBooleanCheckbox
																		value="#{creacionController.parametroEmpresa.facturacionComputarizada}"
																		styleClass="switch">
																		<f:ajax />
																	</h:selectBooleanCheckbox><span class="switch"></span>
																</label>
															</div>
														</div>
													</div>
												</div>
											</div>
											<div class="form-actions">
												<div class="row">
													<div class="col-md-12">
														<div class="form-group">
															<div class="col-md-2">
																<p:commandLink id="buttonAnterior" value="Anterior"
																	styleClass="btn white btn-circle"
																	disabled="#{ ! creacionController.buttonAnterior}"
																	style="height:31px; padding:center; text-decoration:none; ">
																	<p:ajax update="@form"
																		listener="#{creacionController.actionButtonAnterior()}" />
																</p:commandLink>
															</div>
															<div class="col-md-8"></div>
															<div class="col-md-2">
																<p:commandLink id="buttonSiguiente" value="Siguiente"
																	styleClass="btn white btn-circle"
																	disabled="#{ ! creacionController.buttonSiguiente}"
																	style="height:31px; padding:center; text-decoration:none; ">
																	<p:ajax update="@form"
																		listener="#{creacionController.actionButtonSiguiente()}" />
																</p:commandLink>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>

							</div>
						</div>
					</section>
				</h:form>
			</section>
		</div>

		<!--END CONTENT-->

		<!-- START GROWL -->
		<h:form id="formGrowl">
			<p:growl id="msgs1" showDetail="true" />
		</h:form>
		<!-- END GROWL -->

		<!-- PLAN DE CUENTA -->
		<p:dialog header="PLAN DE CUENTA" widgetVar="dlgPlanCuenta"
			modal="true" visible="#{not empty facesContext.maximumSeverity}"
			resizable="false" position="center" width="80%">  
			<h:form id="formModalPlanCuenta">
				<div class="row">
					<div class="col-md-12">
						<div class="form-group ">
							<div class="col-md-12">
								<div class="form-group ">
									<p:treeTable id="docs" scrollable="true"
										value="#{creacionController.rootPC}" var="node"
										selectionMode="single" scrollHeight="250" scrollWidth="100%"
										emptyMessage="No se encontraron Cuentas."
										style="font-size: 12px !important; line-height: 1.33846154 !important; font-family: sans-serif !important;">
										<p:column headerText="Código">
											<ui:fragment rendered="#{node.clase == 'CONTROL'}">
												<h:outputText value="#{node.codigo}" />
											</ui:fragment>
											<ui:fragment rendered="#{node.clase != 'CONTROL'}">
												<h:outputText value="#{node.codigo}" style="color:#5B9BE1;" />
											</ui:fragment>
										</p:column>
										<p:column headerText="Cuenta">
											<ui:fragment rendered="#{node.clase == 'CONTROL'}">
												<h:outputText value="#{node.cuenta}" />
											</ui:fragment>
											<ui:fragment rendered="#{node.clase != 'CONTROL'}">
												<h:outputText value="#{node.cuenta}" style="color:#5B9BE1; " />
											</ui:fragment>
										</p:column>
										
									</p:treeTable>
								</div>
							</div>
						</div>
					</div>
				</div>
				<br />
				<div class="row">
				<div class="col-md-9"></div>
					<div class="col-md-3">
						<div class="form-group">
							<p:commandLink id="buttonOcultarPlanCuenta" value="&#160; Atras"
								styleClass="btn btn-warning ion-minus-circled btn-block"
								style="height:31px; padding:center"
								onclick="PF('dlgPlanCuenta').hide()">
							</p:commandLink>
						</div>
					</div>
				</div>
			</h:form>
		</p:dialog>


		<!--DEFINIR PLAN DE CUENTA -->
		<p:dialog header="DEFINICION DE PLAN DE CUENTA"
			widgetVar="dlgDefinirPlanCuenta" modal="true" 
			visible="#{not empty facesContext.maximumSeverity}" resizable="false"
			position="center" height="80%" width="80%">
			<h:form id="formModalDefinirPlanCuenta">
				<div class="row">
					<div class="col-md-12">
						<div class="form-group ">
							<div class="col-md-12">
								<div class="form-group ">
									<p:dataTable id="dataTableDefinirCuenta" var="var"
										value="#{creacionController.listDefinicionCuenta}"
										selection="#{creacionController.selectedTipoCuenta}"
										reflow="true" selectionMode="single" rowKey="#{var.digito}"
										style="font-size: 12px !important; line-height: 1.33846154 !important; font-family: sans-serif !important;">

										<p:ajax event="rowSelect"
											listener="#{creacionController.onRowSelectTipoCuenta}"
											update="formModalDefinirPlanCuenta" />

										<p:column width="75%" headerText="Cuenta">
											<h:outputText value="#{var.nombre}" />
										</p:column>
										<p:column width="25%" headerText="Digito Inicial">
											<h:outputText value="#{var.digito}" />
										</p:column>
									</p:dataTable>

								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12">
						<div class="form-group">
							<label class="control-label col-md-3">Definir Digito
								Cuenta :<span class="required">*</span>
							</label>
							<div class="col-md-2">
								<p:spinner id="spinnerTamanioNivel"
									value="#{creacionController.selectedTipoCuenta.digito}" min="1"
									max="9">
									<p:ajax update="@form"
										listener="#{creacionController.cargarDigitoDefinicionCuenta()}" />
								</p:spinner>
							</div>
						</div>
					</div>
				</div>
				<br />
				<div class="row">
					<div class="col-md-6"></div>
					<div class="col-md-3">
						<div class="form-group">
							<p:commandLink id="buttonOcultarDefinirPlanCuenta"
								value="&#160; Atras"
								styleClass="btn btn-warning ion-minus-circled btn-block"
								style="height:31px; padding:center"
								onclick="PF('dlgDefinirPlanCuenta').hide()">
							</p:commandLink>
						</div>
					</div>
					<div class="col-md-3">
						<div class="form-group">
							<p:commandLink id="buttonAceptarDefinirPlanCuenta"
								value="&#160; Aceptar"
								styleClass="btn btn-primary ion-checkmark btn-block"
								style="height:31px; padding:center"
								onclick="PF('dlgDefinirPlanCuenta').hide()">
							</p:commandLink>
						</div>
					</div>
				</div>
			</h:form>
		</p:dialog>
		<!-- END DIALOG -->

	</ui:define>

	<ui:insert name="scripts">
		<script
			src="#{request.contextPath}/resources/rock/assets/plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js"></script>
		<script
			src="#{request.contextPath}/resources/rock/assets/js/form-wizard.js"></script>
	</ui:insert>
</ui:composition>